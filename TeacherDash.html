<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Dashboard | EdTech</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Modern Scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f8fafc;
            border-radius: 8px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #e2e8f0;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #cbd5e1;
        }

        /* Advanced Animations */
        @keyframes fadeInUp {
            from { 
                opacity: 0; 
                transform: translateY(20px);
            }
            to { 
                opacity: 1; 
                transform: translateY(0);
            }
        }

        @keyframes scaleIn {
            from { 
                opacity: 0; 
                transform: scale(0.95);
            }
            to { 
                opacity: 1; 
                transform: scale(1);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Element Animations */
        .question-item {
            animation: fadeInUp 0.4s ease-out;
        }

        .btn-upload {
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn-upload:hover {
            transform: translateY(-4px);
        }

        .btn-upload::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to right, transparent, rgba(255,255,255,0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .btn-upload:hover::after {
            transform: translateX(100%);
        }

        /* Card Hover Effects */
        .card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        /* Input Focus Effects */
        input:focus, select:focus {
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        /* Button Animations */
        button {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        button:active {
            transform: scale(0.95);
        }

        /* Glass Effect */
        .glass-effect {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* Gradient Text */
        .gradient-text {
            background: linear-gradient(to right, #3b82f6, #8b5cf6);
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            -webkit-text-fill-color: transparent;
        }

        /* Validation Shake Animation */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }

        .shake-animation {
            animation: shake 0.5s ease-in-out;
        }

        /* Modal Animations */
        .modal:not(.hidden) .modal-content {
            opacity: 1;
            transform: scale(1);
        }

        .modal {
            opacity: 0;
            transition: opacity 0.3s ease-out;
        }

        .modal:not(.hidden) {
            opacity: 1;
        }

        /* Modal Content Area */
        .modal-content {
            position: relative;
        }

        .modal-content::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom right, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.05));
            pointer-events: none;
            border-radius: 1.5rem;
        }
    </style>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Check if teacher is logged in
            const teacherData = JSON.parse(localStorage.getItem('teacherData'));
            if (!teacherData) {
                window.location.href = 'index.html';
                return;
            }

            // Update profile information
            document.getElementById('teacher-name').textContent = teacherData.name;
            document.getElementById('teacher-designation').textContent = teacherData.designation;
            
            // Generate avatar with initials
            const initials = teacherData.name
                .split(' ')
                .map(n => n[0])
                .join('')
                .toUpperCase();
            document.getElementById('teacher-avatar').src = `https://placehold.co/60x60/9333ea/ffffff?text=${initials}`;
        });
    </script>
</head>
<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <i data-lucide="book-marked"></i>
                <span>TeacherDash</span>
            </div>
            <div class="sidebar-profile">
                <img id="teacher-avatar" src="https://i.pravatar.cc/60?img=12" alt="Teacher Avatar">
                <h4 id="teacher-name"></h4>
                <p id="teacher-designation"></p>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li class="active"><a href="#" data-page="dashboard"><i data-lucide="layout-dashboard"></i><span>Dashboard</span></a></li>
                    <li><a href="#" data-page="manage-content"><i data-lucide="folder-kanban"></i><span>Manage Content</span></a></li>
                    <li><a href="#" data-page="study-rooms"><i data-lucide="door-open"></i><span>Study Rooms</span></a></li>
                    <li><a href="#" data-page="student-progress"><i data-lucide="users"></i><span>Student Progress</span></a></li>
                    <li><a href="#" data-page="feedback-reports"><i data-lucide="message-square-quote"></i><span>Feedback & Reports</span></a></li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <ul>
                    <li><a href="#" data-page="settings"><i data-lucide="settings"></i><span>Settings</span></a></li>
                </ul>
            </div>
        </aside>

        <div class="main-content">
            <header class="main-header">
                <div class="header-search">
                    <i data-lucide="search"></i>
                    <input type="text" placeholder="Search students, content, or reports...">
                </div>
                <div class="header-actions">
                    <button class="action-btn notifications">
                        <i data-lucide="bell"></i>
                        <span class="notification-badge">3</span>
                    </button>
                    <div class="profile-dropdown">
                        <img src="https://i.pravatar.cc/40?img=12" alt="Teacher Avatar">
                    </div>
                </div>
            </header>

            <main id="dashboard" class="page-section active">
                 <div class="dashboard-grid">
                     <div class="card card-overview">
                        <h3>Class Overview</h3>
                        <div class="overview-section">
                            <div class="overview-stats-group">
                                <div class="stat-item">
                                    <p>Total Students</p>
                                    <span>64</span>
                                </div>
                                <div class="stat-item">
                                    <p>Average Progress</p>
                                    <span>72%</span>
                                </div>
                            </div>
                            <div class="progress-circle-wrapper">
                                <div class="progress-circle" data-progress="72">
                                    <div class="progress-percentage">72%</div>
                                </div>
                            </div>
                        </div>
                        <div class="activity-section">
                            <p>Active Learners Today: 28</p>
                            <div class="sparkline-chart">
                                <div style="height: 60%;"></div>
                                <div style="height: 80%;"></div>
                                <div style="height: 40%;"></div>
                                <div style="height: 90%;"></div>
                                <div style="height: 70%;"></div>
                                <div style="height: 50%;"></div>
                            </div>
                        </div>
                    </div>
            <div class="card card-upload bg-gradient-to-b from-white to-gray-50 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
                <div class="p-8">
                    <div class="flex items-center justify-between mb-8">
                        <div class="flex items-center">
                            <div class="bg-gradient-to-br from-purple-500 to-purple-600 p-3 rounded-xl mr-4 shadow-lg shadow-purple-100">
                                <i data-lucide="upload" class="h-6 w-6 text-white"></i>
                            </div>
                            <div>
                                <h3 class="text-2xl font-bold text-gray-800 mb-1">Quick Upload</h3>
                                <p class="text-gray-500">Create and share learning materials</p>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-6">
                        <button class="btn-upload relative flex items-center justify-center p-6 bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all duration-300 shadow-md hover:shadow-xl group overflow-hidden">
                            <div class="absolute inset-0 bg-gradient-to-r from-white/0 via-white/10 to-white/0 opacity-0 group-hover:opacity-100 transform -translate-x-full group-hover:translate-x-full transition-all duration-1000"></div>
                            <div class="p-3 bg-white/20 rounded-xl mr-4 group-hover:scale-110 transition-transform duration-300 backdrop-blur-sm">
                                <i data-lucide="video" class="h-6 w-6"></i>
                            </div>
                            <div class="text-left">
                                <span class="block font-semibold text-lg">New Video</span>
                                <span class="text-sm text-blue-100">Upload video content</span>
                            </div>
                        </button>
                        <button id="new-quiz-btn" class="btn-upload relative flex items-center justify-center p-6 bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all duration-300 shadow-md hover:shadow-xl group overflow-hidden">
                            <div class="absolute inset-0 bg-gradient-to-r from-white/0 via-white/10 to-white/0 opacity-0 group-hover:opacity-100 transform -translate-x-full group-hover:translate-x-full transition-all duration-1000"></div>
                            <div class="p-3 bg-white/20 rounded-xl mr-4 group-hover:scale-110 transition-transform duration-300 backdrop-blur-sm">
                                <i data-lucide="file-question" class="h-6 w-6"></i>
                            </div>
                            <div class="text-left">
                                <span class="block font-semibold text-lg">New Quiz</span>
                                <span class="text-sm text-purple-100">Create assessment</span>
                            </div>
                        </button>
                        <button class="btn-upload relative flex items-center justify-center p-6 bg-gradient-to-br from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-300 shadow-md hover:shadow-xl group overflow-hidden">
                            <div class="absolute inset-0 bg-gradient-to-r from-white/0 via-white/10 to-white/0 opacity-0 group-hover:opacity-100 transform -translate-x-full group-hover:translate-x-full transition-all duration-1000"></div>
                            <div class="p-3 bg-white/20 rounded-xl mr-4 group-hover:scale-110 transition-transform duration-300 backdrop-blur-sm">
                                <i data-lucide="file-text" class="h-6 w-6"></i>
                            </div>
                            <div class="text-left">
                                <span class="block font-semibold text-lg">New Notes</span>
                                <span class="text-sm text-green-100">Share study material</span>
                            </div>
                        </button>
                        <button class="btn-upload relative flex items-center justify-center p-6 bg-gradient-to-br from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-300 shadow-md hover:shadow-xl group overflow-hidden">
                            <div class="absolute inset-0 bg-gradient-to-r from-white/0 via-white/10 to-white/0 opacity-0 group-hover:opacity-100 transform -translate-x-full group-hover:translate-x-full transition-all duration-1000"></div>
                            <div class="p-3 bg-white/20 rounded-xl mr-4 group-hover:scale-110 transition-transform duration-300 backdrop-blur-sm">
                                <i data-lucide="clipboard-check" class="h-6 w-6"></i>
                            </div>
                            <div class="text-left">
                                <span class="block font-semibold text-lg">New Assignment</span>
                                <span class="text-sm text-orange-100">Create homework</span>
                            </div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Quiz Creation Modal -->
            <div id="quiz-modal" class="modal hidden fixed inset-0 bg-gray-900/70 backdrop-blur-sm flex items-center justify-center z-50 p-4 transition-all duration-300">
                <div class="bg-white rounded-2xl shadow-2xl shadow-purple-900/10 w-full max-w-4xl max-h-[90vh] overflow-hidden transform transition-all duration-300 scale-95 opacity-0 modal-content">
                    <div class="flex items-center justify-between mb-8">
                        <div class="flex items-center">
                            <div class="bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-xl mr-4 shadow-lg shadow-blue-100">
                                <i data-lucide="file-question" class="h-6 w-6 text-white"></i>
                            </div>
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800 mb-1">Create New Quiz</h2>
                                <p class="text-sm text-gray-500">Design your quiz with multiple choice questions</p>
                            </div>
                        </div>
                        <button type="button" id="close-quiz-modal" class="p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors">
                            <i data-lucide="x" class="h-6 w-6"></i>
                        </button>
                    </div>
                    
                    <form id="quiz-form" class="space-y-6">
                        <div class="bg-gray-50 rounded-xl p-6 border border-gray-200 space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="space-y-2">
                                    <label for="quiz-title" class="flex items-center text-sm font-semibold text-gray-700">
                                        <i data-lucide="pencil" class="h-4 w-4 mr-2 text-blue-600"></i>
                                        Quiz Title
                                    </label>
                                    <div class="relative">
                                        <input type="text" id="quiz-title" name="title" required 
                                            class="w-full bg-white border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 hover:border-gray-300"
                                            placeholder="e.g., Algebra Basics Quiz">
                                    </div>
                                </div>
                                <div class="space-y-2">
                                    <label for="quiz-subject" class="flex items-center text-sm font-semibold text-gray-700">
                                        <i data-lucide="book-open" class="h-4 w-4 mr-2 text-purple-600"></i>
                                        Subject
                                    </label>
                                    <div class="relative">
                                        <select id="quiz-subject" name="subject" required 
                                            class="w-full bg-white border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 hover:border-gray-300 appearance-none">
                                            <option value="">Select Subject</option>
                                            <option value="Mathematics">Mathematics</option>
                                            <option value="Physics">Physics</option>
                                            <option value="Chemistry">Chemistry</option>
                                            <option value="Biology">Biology</option>
                                        </select>
                                        <i data-lucide="chevron-down" class="absolute right-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"></i>
                                    </div>
                                </div>
                                <div class="space-y-2">
                                    <label for="quiz-grade" class="flex items-center text-sm font-semibold text-gray-700">
                                        <i data-lucide="graduation-cap" class="h-4 w-4 mr-2 text-green-600"></i>
                                        Grade Level
                                    </label>
                                    <div class="relative">
                                        <select id="quiz-grade" name="grade" required 
                                            class="w-full bg-white border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 hover:border-gray-300 appearance-none">
                                            <option value="">Select Grade</option>
                                            <option value="9">9th Grade</option>
                                            <option value="10">10th Grade</option>
                                            <option value="11">11th Grade</option>
                                            <option value="12">12th Grade</option>
                                        </select>
                                        <i data-lucide="chevron-down" class="absolute right-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"></i>
                                    </div>
                                </div>
                                <div class="space-y-2">
                                    <label for="quiz-duration" class="flex items-center text-sm font-semibold text-gray-700">
                                        <i data-lucide="clock" class="h-4 w-4 mr-2 text-orange-600"></i>
                                        Duration
                                    </label>
                                    <div class="relative">
                                        <input type="number" id="quiz-duration" name="duration" min="1" required 
                                            class="w-full bg-white border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 hover:border-gray-300"
                                            placeholder="Duration in minutes">
                                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm font-medium">minutes</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-8">
                            <div class="bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 mb-6 shadow-lg">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <div class="bg-white/20 p-2 rounded-lg mr-3">
                                            <i data-lucide="list-checks" class="h-5 w-5 text-white"></i>
                                        </div>
                                        <div>
                                            <h3 class="text-lg font-semibold text-white">Questions</h3>
                                            <p class="text-blue-100 text-sm">Add multiple choice questions to your quiz</p>
                                        </div>
                                    </div>
                                    <button type="button" id="add-question-btn" 
                                        class="flex items-center px-5 py-2.5 bg-white text-blue-600 rounded-xl hover:bg-blue-50 transition-all duration-300 shadow-sm hover:shadow-md group">
                                        <div class="p-1 bg-blue-100 rounded-lg mr-2 group-hover:scale-110 transition-transform">
                                            <i data-lucide="plus-circle" class="h-5 w-5"></i>
                                        </div>
                                        <span class="font-medium">Add Question</span>
                                    </button>
                                </div>
                            </div>
                            <div id="questions-container" class="space-y-6">
                                <!-- Questions will be added here dynamically -->
                            </div>
                            <div id="no-questions" class="text-center py-8 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200 hidden">
                                <div class="bg-white/80 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm">
                                    <i data-lucide="file-question" class="h-8 w-8 text-gray-400"></i>
                                </div>
                                <h4 class="text-gray-600 font-medium mb-2">No Questions Added Yet</h4>
                                <p class="text-gray-500 text-sm">Click the "Add Question" button to start creating your quiz</p>
                            </div>
                        </div>

                        <div class="border-t border-gray-200 pt-6 flex justify-end space-x-4">
                            <button type="button" id="cancel-quiz-btn" 
                                class="px-6 py-2.5 border-2 border-gray-200 text-gray-600 font-medium rounded-xl hover:bg-gray-50 hover:border-gray-300 transition-all duration-300 flex items-center">
                                <i data-lucide="x" class="h-5 w-5 mr-2"></i>
                                Cancel
                            </button>
                            <button type="submit" 
                                class="px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all duration-300 shadow-sm hover:shadow flex items-center">
                                <i data-lucide="check" class="h-5 w-5 mr-2"></i>
                                Create Quiz
                            </button>
                        </div>
                    </form>
                </div>
            </div>
                    <div class="card card-alerts"><h3>Student Alerts</h3><p>Students who might need intervention.</p><ul class="alert-list"><li><img src="https://i.pravatar.cc/40?img=3" alt="Student"><div class="alert-info"><strong>Alex Chen</strong><small>Needs revision on Algebra</small></div><span class="badge badge-warning">Struggling</span></li><li><img src="https://i.pravatar.cc/40?img=5" alt="Student"><div class="alert-info"><strong>Samantha Lee</strong><small>Missed Geometry quiz</small></div><span class="badge badge-danger">At Risk</span></li></ul></div>
                    <div class="card card-leaderboard"><h3>Leaderboard Snapshot</h3><p>Top 3 students this week.</p><ul class="leaderboard-list"><li><span>ðŸ¥‡</span><img src="https://i.pravatar.cc/32?img=8" alt=""><strong>Anya Sharma</strong><span>4,500 pts</span></li><li><span>ðŸ¥ˆ</span><img src="https://i.pravatar.cc/32?img=7" alt=""><strong>Ben Carter</strong><span>3,800 pts</span></li><li><span>ðŸ¥‰</span><img src="https://i.pravatar.cc/32?img=9" alt=""><strong>Chloe Davis</strong><span>3,100 pts</span></li></ul></div>
                </div>
            </main>

            <main id="manage-content" class="page-section">
                <div class="page-header">
                    <h1>Manage Content</h1>
                    <div class="header-buttons">
                        <button class="btn btn-live"><i data-lucide="video"></i> Start a Live Class</button>
                        <button class="btn btn-primary"><i data-lucide="plus-circle"></i> Add New Content</button>
                    </div>
                </div>
                <div class="card"><table class="content-table"><thead><tr><th>Title</th><th>Type</th><th>Date Uploaded</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr><td>Introduction to Algebra</td><td><span class="badge badge-blue">Video</span></td><td>2025-09-15</td><td><span class="badge badge-success">Published</span></td><td><div class="action-buttons"><button class="btn-icon"><i data-lucide="edit-2"></i></button><button class="btn-icon btn-icon-danger"><i data-lucide="trash-2"></i></button></div></td></tr><tr><td>Unit 1 Quiz</td><td><span class="badge badge-purple">Quiz</span></td><td>2025-09-12</td><td><span class="badge badge-success">Published</span></td><td><div class="action-buttons"><button class="btn-icon"><i data-lucide="edit-2"></i></button><button class="btn-icon btn-icon-danger"><i data-lucide="trash-2"></i></button></div></td></tr><tr><td>Calculus Chapter Notes</td><td><span class="badge badge-grey">Notes</span></td><td>2025-09-10</td><td><span class="badge badge-warning">Draft</span></td><td><div class="action-buttons"><button class="btn-icon"><i data-lucide="edit-2"></i></button><button class="btn-icon btn-icon-danger"><i data-lucide="trash-2"></i></button></div></td></tr></tbody></table></div>
            </main>

            <main id="study-rooms" class="page-section">
                <div class="page-header">
                    <h1>Study Rooms</h1>
                    <button class="btn btn-primary"><i data-lucide="plus"></i> Schedule New Room</button>
                </div>
                <div class="study-rooms-grid">
                    <div class="room-card">
                        <div class="room-status live">Live Now</div>
                        <h4>Calculus Q&A Session</h4>
                        <div class="room-details"><span><i data-lucide="calendar"></i> Oct 3, 2025</span><span><i data-lucide="clock"></i> 10:00 AM</span><span><i data-lucide="users"></i> 18 Students</span></div>
                        <button class="btn btn-live full-width"><i data-lucide="log-in"></i> Join Room</button>
                    </div>
                    <div class="room-card">
                        <div class="room-status upcoming">Upcoming</div>
                        <h4>Physics Chapter 5 Review</h4>
                        <div class="room-details"><span><i data-lucide="calendar"></i> Oct 4, 2025</span><span><i data-lucide="clock"></i> 2:00 PM</span></div>
                        <button class="btn btn-secondary full-width"><i data-lucide="bell-plus"></i> Remind Me</button>
                    </div>
                    <div class="room-card">
                        <div class="room-status finished">Finished</div>
                        <h4>Algebra Mid-Term Prep</h4>
                        <div class="room-details"><span><i data-lucide="calendar"></i> Oct 1, 2025</span><span><i data-lucide="users"></i> 25 Students</span></div>
                        <button class="btn btn-secondary full-width"><i data-lucide="play-circle"></i> View Recording</button>
                    </div>
                </div>
            </main>

            <main id="student-progress" class="page-section">
                <div class="page-header"><h1>Student Progress</h1><div class="filters"><select><option>All Classes</option></select><button class="btn btn-secondary"><i data-lucide="download"></i> Export Report</button></div></div>
                <div class="card"><table class="content-table"><thead><tr><th>Student Name</th><th>Overall Progress</th><th>Quizzes Passed</th><th>Last Active</th><th>Actions</th></tr></thead><tbody><tr><td><strong>Alex Chen</strong></td><td><div class="progress-bar-table"><div class="progress" style="width: 65%;"></div><span>65%</span></div></td><td>8 / 12</td><td>1 day ago</td><td><button class="btn btn-small">View Details</button></td></tr><tr><td><strong>Anya Sharma</strong></td><td><div class="progress-bar-table"><div class="progress" style="width: 92%;"></div><span>92%</span></div></td><td>11 / 12</td><td>2 hours ago</td><td><button class="btn btn-small">View Details</button></td></tr><tr><td><strong>Samantha Lee</strong></td><td><div class="progress-bar-table"><div class="progress progress-danger" style="width: 45%;"></div><span>45%</span></div></td><td>5 / 12</td><td>4 days ago</td><td><button class="btn btn-small">View Details</button></td></tr></tbody></table></div>
            </main>

            <main id="feedback-reports" class="page-section">
                <div class="page-header"><h1>Feedback & Reports</h1></div>
                <div class="reports-grid">
                    <div class="card">
                        <h3>Recent Student Feedback</h3>
                        <ul class="feedback-list">
                            <li><img src="https://i.pravatar.cc/40?img=11" alt="Student"><div><strong>Ben Carter</strong><p>The last video on Algebra was super helpful!</p></div></li>
                            <li><img src="https://i.pravatar.cc/40?img=15" alt="Student"><div><strong>Maria Garcia</strong><p>Could we have more practice problems for the next quiz?</p></div></li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>Generate Reports</h3>
                        <form class="report-form">
                            <div class="form-group"><label for="reportType">Report Type</label><select id="reportType"><option>Class Performance Summary</option><option>Individual Student Progress</option><option>Quiz Analytics</option></select></div>
                            <div class="form-group"><label for="dateRange">Date Range</label><input type="date" id="dateRange"></div>
                            <button class="btn btn-primary full-width"><i data-lucide="file-down"></i> Generate Report</button>
                        </form>
                    </div>
                </div>
            </main>
            
            <main id="settings" class="page-section">
                <div class="page-header"><h1>Settings</h1></div>
                <div class="card settings-card"><form><fieldset><legend>Profile Information</legend><div class="form-group"><label for="fullName">Full Name</label><input type="text" id="fullName" value="Jane Doe"></div><div class="form-group"><label for="email">Email Address</label><input type="email" id="email" value="jane.doe@example.com"></div></fieldset><fieldset><legend>Password</legend><div class="form-group"><label for="currentPassword">Current Password</label><input type="password" id="currentPassword"></div><div class="form-group"><label for="newPassword">New Password</label><input type="password" id="newPassword"></div></fieldset><button type="submit" class="btn btn-primary">Save Changes</button></form></div>
            </main>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const navLinks = document.querySelectorAll('.sidebar-nav a, .sidebar-footer a');
            const pageSections = document.querySelectorAll('.page-section');
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetPageId = link.getAttribute('data-page');
                    document.querySelector('.sidebar-nav li.active, .sidebar-footer li.active')?.classList.remove('active');
                    link.parentElement.classList.add('active');
                    pageSections.forEach(section => {
                        section.classList.remove('active');
                        if (section.id === targetPageId) { section.classList.add('active'); }
                    });
                });
            });

            // Quiz Modal Functionality
            const quizModal = document.getElementById('quiz-modal');
            const newQuizBtn = document.getElementById('new-quiz-btn');
            const cancelQuizBtn = document.getElementById('cancel-quiz-btn');
            const quizForm = document.getElementById('quiz-form');
            const addQuestionBtn = document.getElementById('add-question-btn');
            const questionsContainer = document.getElementById('questions-container');

            // Show Quiz Modal
            newQuizBtn.addEventListener('click', () => {
                quizModal.classList.remove('hidden');
                resetQuizForm();
            });

            // Hide Quiz Modal
            cancelQuizBtn.addEventListener('click', () => {
                quizModal.classList.add('hidden');
                resetQuizForm();
            });

            // Close modal when clicking outside
            quizModal.addEventListener('click', (e) => {
                if (e.target === quizModal) {
                    quizModal.classList.add('hidden');
                    resetQuizForm();
                }
            });

            // Show empty state initially
            toggleEmptyState();

            // Add Question
            addQuestionBtn.addEventListener('click', () => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-item border-t border-gray-200 pt-4 mt-4';
                const questionCount = questionsContainer.getElementsByClassName('question-item').length + 1;
                
                questionDiv.innerHTML = `
                    <div class="bg-gray-50 rounded-xl p-6 border border-gray-200">
                        <div class="flex justify-between items-center mb-4">
                            <div class="flex items-center">
                                <span class="w-8 h-8 flex items-center justify-center bg-blue-100 text-blue-600 rounded-lg font-semibold mr-3">
                                    ${questionCount}
                                </span>
                                <h4 class="text-lg font-semibold text-gray-800">Question ${questionCount}</h4>
                            </div>
                            <button type="button" class="delete-question p-2 text-gray-400 hover:text-red-500 transition-colors">
                                <i data-lucide="trash-2" class="h-5 w-5"></i>
                            </button>
                        </div>
                        <div class="space-y-4">
                            <div>
                                <input type="text" name="questions[${questionCount-1}][question]" 
                                    placeholder="Enter your question" required
                                    class="w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
                            </div>
                            
                            <div class="options-container grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="relative">
                                    <span class="absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 flex items-center justify-center bg-blue-100 text-blue-600 rounded-full font-medium">A</span>
                                    <input type="text" name="questions[${questionCount-1}][options][]" 
                                        placeholder="Option 1" required
                                        class="w-full border border-gray-300 rounded-lg pl-12 pr-4 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
                                </div>
                                <div class="relative">
                                    <span class="absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 flex items-center justify-center bg-blue-100 text-blue-600 rounded-full font-medium">B</span>
                                    <input type="text" name="questions[${questionCount-1}][options][]" 
                                        placeholder="Option 2" required
                                        class="w-full border border-gray-300 rounded-lg pl-12 pr-4 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
                                </div>
                                <div class="relative">
                                    <span class="absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 flex items-center justify-center bg-blue-100 text-blue-600 rounded-full font-medium">C</span>
                                    <input type="text" name="questions[${questionCount-1}][options][]" 
                                        placeholder="Option 3" required
                                        class="w-full border border-gray-300 rounded-lg pl-12 pr-4 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
                                </div>
                                <div class="relative">
                                    <span class="absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 flex items-center justify-center bg-blue-100 text-blue-600 rounded-full font-medium">D</span>
                                    <input type="text" name="questions[${questionCount-1}][options][]" 
                                        placeholder="Option 4" required
                                        class="w-full border border-gray-300 rounded-lg pl-12 pr-4 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Correct Answer</label>
                                <select name="questions[${questionCount-1}][correctAnswer]" required
                                    class="w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
                                    <option value="">Select correct option</option>
                                    <option value="0">Option A</option>
                                    <option value="1">Option B</option>
                                    <option value="2">Option C</option>
                                    <option value="3">Option D</option>
                                </select>
                            </div>
                        </div>
                    </div>
                `;

                questionsContainer.appendChild(questionDiv);
                
                // Initialize delete button for the new question
                const deleteBtn = questionDiv.querySelector('.delete-question');
                deleteBtn.addEventListener('click', () => {
                    questionDiv.remove();
                    updateQuestionNumbers();
                });

                // Initialize Lucide icons for the new elements
                lucide.createIcons({
                    target: questionDiv
                });
            });

            // Function to toggle empty state visibility
            function toggleEmptyState() {
                const noQuestionsDiv = document.getElementById('no-questions');
                const hasQuestions = questionsContainer.getElementsByClassName('question-item').length > 0;
                noQuestionsDiv.classList.toggle('hidden', hasQuestions);
            }

            // Function to update question numbers after deletion
            function updateQuestionNumbers() {
                const questions = questionsContainer.getElementsByClassName('question-item');
                Array.from(questions).forEach((question, index) => {
                    const heading = question.querySelector('h4');
                    heading.textContent = `Question ${index + 1}`;
                });
                toggleEmptyState();
            }

            // Function to reset the quiz form with animation
            function resetQuizForm() {
                const questions = questionsContainer.getElementsByClassName('question-item');
                Array.from(questions).forEach((question, index) => {
                    setTimeout(() => {
                        question.style.animation = 'fadeInUp 0.3s reverse';
                        setTimeout(() => questionsContainer.removeChild(question), 300);
                    }, index * 100);
                });
                quizForm.reset();
                
                // Reset form fields with smooth transition
                const inputs = quizForm.querySelectorAll('input, select');
                inputs.forEach(input => {
                    input.style.transition = 'border-color 0.3s ease';
                    input.classList.remove('border-red-500');
                });
            }

            // Enhanced form validation
            function validateForm() {
                let isValid = true;
                const inputs = quizForm.querySelectorAll('input[required], select[required]');
                
                inputs.forEach(input => {
                    if (!input.value) {
                        isValid = false;
                        input.classList.add('border-red-500');
                        input.classList.add('shake-animation');
                        setTimeout(() => input.classList.remove('shake-animation'), 500);
                    } else {
                        input.classList.remove('border-red-500');
                    }
                });

                return isValid;
            }

            // Smooth scroll to added question
            function scrollToElement(element) {
                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }

            // Handle form submission
            quizForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                // Validate that at least one question exists
                if (questionsContainer.getElementsByClassName('question-item').length === 0) {
                    alert('Please add at least one question to the quiz');
                    return;
                }
                
                const formData = new FormData(quizForm);
                const quizData = {
                    title: formData.get('title'),
                    subject: formData.get('subject'),
                    grade: parseInt(formData.get('grade')),
                    duration: parseInt(formData.get('duration')),
                    questions: []
                };

                // Get all question divs
                const questionDivs = questionsContainer.getElementsByClassName('question-item');
                Array.from(questionDivs).forEach((questionDiv, index) => {
                    const questionInputs = questionDiv.querySelectorAll('input[name^="questions"]');
                    const options = Array.from(questionDiv.querySelectorAll('input[name$="[options][]"]')).map(input => input.value);
                    const correctAnswer = parseInt(questionDiv.querySelector(`select[name="questions[${index}][correctAnswer]"]`).value);

                    quizData.questions.push({
                        question: questionInputs[0].value,
                        options: options,
                        correctAnswer: correctAnswer
                    });
                });

                try {
                    // Get the teacher data and token
                    const teacherData = JSON.parse(localStorage.getItem('teacherData'));
                    if (!teacherData) {
                        alert('Please log in again');
                        window.location.href = 'index.html';
                        return;
                    }

                    // Add teacher information to quiz data
                    quizData.teacher = teacherData.id; // Add the teacher's ID
                    
                    console.log('Sending quiz data:', quizData); // Debug log

                    const response = await fetch('http://localhost:5000/api/quizzes', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${localStorage.getItem('token')}`
                        },
                        body: JSON.stringify(quizData)
                    });

                    if (response.ok) {
                        const result = await response.json();
                        console.log('Quiz created successfully:', result); // Debug log
                        alert('Quiz created successfully!');
                        quizModal.classList.add('hidden');
                        resetQuizForm();
                    } else {
                        const error = await response.json();
                        console.error('Server error:', error); // Debug log
                        alert(error.message || 'Error creating quiz. Please try again.');
                    }
                } catch (error) {
                    console.error('Client error:', error); // Debug log
                    alert('Error connecting to server. Please check your connection and try again.');
                }
            });

            // Initialize Circular Progress Charts
            document.querySelectorAll('.progress-circle').forEach(circle => {
                const progress = circle.getAttribute('data-progress');
                const circumference = 2 * Math.PI * 35; // 2 * PI * radius (radius is half of 70px width/height)
                const offset = circumference - (progress / 100) * circumference;

                // Create SVG elements dynamically
                const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute("viewBox", "0 0 80 80"); // viewBox for a 70px diameter circle + padding
                
                const backgroundCircle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                backgroundCircle.setAttribute("cx", "40");
                backgroundCircle.setAttribute("cy", "40");
                backgroundCircle.setAttribute("r", "35");
                backgroundCircle.setAttribute("fill", "none");
                backgroundCircle.setAttribute("stroke", "var(--light-blue)");
                backgroundCircle.setAttribute("stroke-width", "8");

                const progressPath = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                progressPath.setAttribute("cx", "40");
                progressPath.setAttribute("cy", "40");
                progressPath.setAttribute("r", "35");
                progressPath.setAttribute("fill", "none");
                progressPath.setAttribute("stroke", "var(--primary-blue)");
                progressPath.setAttribute("stroke-width", "8");
                progressPath.setAttribute("stroke-dasharray", circumference);
                progressPath.setAttribute("stroke-dashoffset", offset);
                progressPath.setAttribute("stroke-linecap", "round");
                progressPath.style.transformOrigin = "center";
                progressPath.style.transform = "rotate(-90deg)";
                progressPath.style.transition = "stroke-dashoffset 0.8s ease-out";

                svg.appendChild(backgroundCircle);
                svg.appendChild(progressPath);
                circle.prepend(svg);
            });


            lucide.createIcons();
        });
    </script>
</body>
</html>git 